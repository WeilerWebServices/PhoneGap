# Lesson 11 - PWA Features

The project has built-in [PWA](https://developers.google.com/web/progressive-web-apps/) support as a result of the template being built on top of the [Vue CLI PWA template](https://github.com/vuejs-templates/pwa).

## Manifest

The `index.html` references the [manifest.json](https://github.com/phonegap/phonegap-app-stockpile/blob/master/static/manifest.json) in a `<link>` tag:

```html
<link rel="manifest" href="./static/manifest.json">
```

From the Google [PWA site](https://developers.google.com/web/progressive-web-apps/):

> "The Web App Manifest allows you to control how your app appears and how it's launched. You can specify home screen icons, the page to load when the app is launched, screen orientation, and even whether or not to show the browser chrome."

The [Stockpile manifest](https://github.com/phonegap/phonegap-app-stockpile/blob/master/static/manifest.json) includes the name to be displayed on the home screen as well as the icons, theme color, and other display configuration.

## Cross Browser Support

PWAs aren't just for Chrome on Android. The `index.html` contains other [UI Customizations](https://github.com/phonegap/phonegap-app-stockpile/blob/master/src/index.html#L18-L33) for browsers like Apple's Safari Mobile and Microsoft's Edge. Edge in particular has been very interested in implementing the PWA standards. Apple and iOS have less support, no service workers for example, but that is what the "P" in PWA is all about. Progressive enhancement when it is available. Apps like Stockpile can still be added to the home screen on iOS and can still have a very app-like experience.

## PWA Best Practices

There are a few best practices when building an app that will also be served as a PWA. One way to ensure you have covered the basics is to go over the [Exemplary Progressive Web App Checklist](https://developers.google.com/web/progressive-web-apps/checklist).

## Service worker support

The Service Worker for Stockpile is generated by the [`sw-precache-webpack-plugin`](https://www.npmjs.com/package/sw-precache-webpack-dev-plugin) and injected into the [`index.html`](https://github.com/phonegap/phonegap-app-stockpile/blob/master/src/index.html#L45-L46) at build time. There are two different generated service workers. One is a [placeholder for development builds](https://github.com/phonegap/phonegap-app-stockpile/blob/master/build/service-worker-dev.js), the other is a [caching service worker](https://github.com/phonegap/phonegap-app-stockpile/blob/master/build/service-worker-prod.js) generated for production builds. Only the production service worker actually caches any of the application.

## Building/testing for devâ€™t vs production workflow

In order to test the service worker, you must test using the `phonegap serve` command, a node server commad like `http-server www`, or deploy to an `https` URL with Firebase or something similar. It is important to note that the [`sw-precache-webpack-plugin`](https://www.npmjs.com/package/sw-precache-webpack-dev-plugin) is currently used and [does not work with the webpack dev server](https://github.com/vuejs-templates/pwa/issues/12) invoked by `npm run dev`.

## Lighthouse

Testing the performance and quality of your PWA is done using [Lighthouse](https://developers.google.com/web/tools/lighthouse/).

## Resources

- [Progressive Web Apps - Google developers](https://developers.google.com/web/progressive-web-apps/)
- [Vue CLI Webpack Template Docs](http://vuejs-templates.github.io/webpack/)
- [Vue CLI PWA Template Docs](https://github.com/vuejs-templates/pwa/tree/master/docs)
- [`sw-precache-webpack-plugin`](https://www.npmjs.com/package/sw-precache-webpack-dev-plugin)
- [Exemplary Progressive Web App Checklist](https://developers.google.com/web/progressive-web-apps/checklist)
- [Cross Platform PWA Workshop](http://hollyschinsky.github.io/todos-app-pwa)

## Next: [Testing](./12-testing.html.md)
